<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session 10: Integration & Enhancement - CSCI 3213</title>
    
    <!-- OCU Branded Presentation Styles with Theme Support -->
    <link rel="stylesheet" href="../../styles/presentation.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <!-- Lecture-Specific Styles -->
    <style>
        .debug-panel {
            background: #1a1a2e;
            color: #0f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            border: 2px solid #16213e;
        }
        
        .polish-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .polish-card {
            background: var(--card-bg, #f8f8f8);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--border-color, #ddd);
            transition: transform 0.3s;
        }
        
        .polish-card:hover {
            transform: scale(1.05);
        }
        
        .optimization-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .bad-code, .good-code {
            padding: 15px;
            border-radius: 8px;
        }
        
        .bad-code {
            background: #ffe6e6;
            border-left: 4px solid #ff4444;
        }
        
        .good-code {
            background: #e6ffe6;
            border-left: 4px solid #44ff44;
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <!-- Timer display -->
        <div class="timer-display" id="timer-display">
            <span id="timer-text">Session 10: Integration & Enhancement
                 <button class="home"><a href="../index.html">Home</a></button>
            </span>
        </div>

        <!-- Slide 1: Title -->
        <div class="slide active">
            <h1>Integration & Enhancement</h1>
            <h2>Bringing It All Together <span class="emoji">üöÄ</span></h2>
            <p style="font-size: 1.5em; margin-top: 40px;">CSCI 3213 - Game Programming</p>
            <p style="font-size: 1.3em;">Spring '26 - Session 10</p>
            <p style="margin-top: auto; font-style: italic;">The final polish makes all the difference!</p>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h1>Today's Quest Objectives</h1>
            <ul style="font-size: 1.4em; line-height: 2;">
                <li>üéØ Integrate all systems into a cohesive game</li>
                <li>üéØ Debug and optimize performance effectively</li>
                <li>üéØ Add polish and enhance game feel</li>
                <li>üéØ Plan next development steps</li>
            </ul>
            
            <div class="tip-box" style="margin-top: 40px;">
                <strong>Today's Mission:</strong> Transform your working prototype into a polished game that feels great to play!
            </div>
        </div>

        <!-- Slide 3: System Integration Overview -->
        <div class="slide">
            <h1>System Integration <span class="emoji">üîó</span></h1>
            <p>Bringing all the pieces together requires careful coordination:</p>
            
            <div class="demo-box">
                <h3>Core Systems Review:</h3>
                <ul style="text-align: left; font-size: 1.1em;">
                    <li><strong>Game Loop:</strong> Update & render cycles</li>
                    <li><strong>Input System:</strong> Keyboard/mouse handling</li>
                    <li><strong>Entity Management:</strong> Players, enemies, objects</li>
                    <li><strong>Physics:</strong> Movement, collision, boundaries</li>
                    <li><strong>Rendering:</strong> Drawing everything to canvas</li>
                </ul>
            </div>
            
            <div class="tip-box">
                <strong>Integration Challenge:</strong> Making systems work together without breaking each other
            </div>
        </div>

        <!-- Slide 4: Integration Pattern -->
        <div class="slide">
            <h1>Clean Integration Architecture</h1>
            
            <div class="code-example">
<span class="comment">// Central game state manager</span>
<span class="keyword">var</span> gameState = {
    entities: [],
    player: <span class="keyword">null</span>,
    score: 0,
    paused: <span class="keyword">false</span>
};

<span class="comment">// Update all systems in sequence</span>
<span class="keyword">function</span> <span class="function">update</span>(deltaTime) {
    <span class="keyword">if</span> (gameState.paused) <span class="keyword">return</span>;
    
    <span class="comment">// 1. Process input</span>
    handleInput();
    
    <span class="comment">// 2. Update physics</span>
    updatePhysics(deltaTime);
    
    <span class="comment">// 3. Check collisions</span>
    checkCollisions();
    
    <span class="comment">// 4. Update entities</span>
    gameState.entities.forEach(<span class="keyword">function</span>(entity) {
        entity.update(deltaTime);
    });
}
            </div>
        </div>

        <!-- Slide 5: Debugging Strategies -->
        <div class="slide">
            <h1>Debugging Like a Pro <span class="emoji">üêõ</span></h1>
            
            <div class="code-example">
<span class="comment">// 1. Error handling</span>
<span class="keyword">try</span> {
    <span class="comment">// Risky code here</span>
    spawnEnemy(x, y);
} <span class="keyword">catch</span> (error) {
    console.<span class="function">error</span>(<span class="string">'Failed to spawn enemy:'</span>, error);
    <span class="comment">// Graceful fallback</span>
}

<span class="comment">// 2. Breakpoints</span>
<span class="keyword">debugger</span>; <span class="comment">// Pauses execution here</span>

<span class="comment">// 3. Pretty-print objects</span>
console.<span class="function">log</span>(JSON.<span class="function">stringify</span>(player, <span class="keyword">null</span>, 2));

<span class="comment">// 4. Conditional logging</span>
<span class="keyword">var</span> DEBUG = <span class="keyword">true</span>;
<span class="keyword">if</span> (DEBUG) console.<span class="function">log</span>(<span class="string">'Player position:'</span>, player.x, player.y);
            </div>
            
            <div class="tip-box">
                <strong>Debug Tip:</strong> Add a debug mode toggle to your game for development!
            </div>
        </div>

        <!-- Slide 6: Debug Panel Example -->
        <div class="slide">
            <h1>Building a Debug Display</h1>
            
            <div class="code-example">
<span class="comment">// Create debug display overlay</span>
<span class="keyword">function</span> <span class="function">drawDebugInfo</span>(ctx) {
    <span class="keyword">if</span> (!DEBUG_MODE) <span class="keyword">return</span>;
    
    ctx.fillStyle = <span class="string">'rgba(0, 0, 0, 0.7)'</span>;
    ctx.<span class="function">fillRect</span>(10, 10, 200, 150);
    
    ctx.fillStyle = <span class="string">'#0f0'</span>;
    ctx.font = <span class="string">'14px monospace'</span>;
    
    <span class="comment">// Display useful info</span>
    ctx.<span class="function">fillText</span>(<span class="string">'FPS: '</span> + currentFPS, 20, 30);
    ctx.<span class="function">fillText</span>(<span class="string">'Entities: '</span> + entities.length, 20, 50);
    ctx.<span class="function">fillText</span>(<span class="string">'Player X: '</span> + player.x, 20, 70);
    ctx.<span class="function">fillText</span>(<span class="string">'Player Y: '</span> + player.y, 20, 90);
    ctx.<span class="function">fillText</span>(<span class="string">'Collisions: '</span> + collisionCount, 20, 110);
}
            </div>
        </div>

        <!-- Slide 7: Performance Optimization -->
        <div class="slide">
            <h1>Performance Optimization <span class="emoji">‚ö°</span></h1>
            <h2>Make it fast, keep it smooth!</h2>
            
            <div class="optimization-comparison">
                <div class="bad-code">
                    <h3>‚ùå Slow</h3>
                    <pre><code>// Don't do this!
for (var i = 0; i < array.length; i++) {
    // Recalculates length each iteration
}</code></pre>
                </div>
                
                <div class="good-code">
                    <h3>‚úÖ Fast</h3>
                    <pre><code>// Cache the length
for (var i = 0, len = array.length; i < len; i++) {
    // Much more efficient
}</code></pre>
                </div>
            </div>
            
            <div class="tip-box">
                <strong>Rule of Thumb:</strong> Optimize what matters. Profile first, optimize second!
            </div>
        </div>

        <!-- Slide 8: More Optimization Techniques -->
        <div class="slide">
            <h1>Optimization Strategies</h1>
            
            <div class="code-example">
<span class="comment">// 1. Object pooling - reuse instead of recreate</span>
<span class="keyword">var</span> particlePool = [];
<span class="keyword">function</span> <span class="function">getParticle</span>() {
    <span class="keyword">return</span> particlePool.<span class="function">pop</span>() || <span class="keyword">new</span> Particle();
}

<span class="comment">// 2. Early exit conditions</span>
<span class="keyword">function</span> <span class="function">checkCollision</span>(a, b) {
    <span class="comment">// Quick bounding box check first</span>
    <span class="keyword">if</span> (a.x > b.x + b.width) <span class="keyword">return false</span>;
    <span class="keyword">if</span> (a.x + a.width < b.x) <span class="keyword">return false</span>;
    <span class="comment">// More expensive checks only if needed</span>
}

<span class="comment">// 3. Batch similar operations</span>
ctx.fillStyle = <span class="string">'red'</span>;
enemies.forEach(<span class="keyword">function</span>(e) { e.<span class="function">draw</span>(ctx); });
            </div>
        </div>

        <!-- Slide 9: Code Organization -->
        <div class="slide">
            <h1>Code Organization & Refactoring</h1>
            
            <div class="demo-box">
                <h3>Clean Code Principles:</h3>
                <ul style="text-align: left;">
                    <li><strong>Single Responsibility:</strong> Each function does one thing well</li>
                    <li><strong>DRY:</strong> Don't Repeat Yourself - reuse code</li>
                    <li><strong>Clear Naming:</strong> Variables and functions should be self-documenting</li>
                    <li><strong>Modularity:</strong> Break large files into smaller, focused modules</li>
                </ul>
            </div>
            
            <div class="tip-box">
                <strong>Refactoring Tip:</strong> If a function is longer than your screen, it probably needs to be split up!
            </div>
        </div>

        <!-- Slide 10: Polish & Game Feel -->
        <div class="slide">
            <h1>Adding Polish <span class="emoji">‚ú®</span></h1>
            <h2>The Magic of Game Feel</h2>
            
            <div class="polish-grid">
                <div class="polish-card">
                    <h3>Screen Shake</h3>
                    <p>Adds impact to collisions and hits</p>
                </div>
                <div class="polish-card">
                    <h3>Particles</h3>
                    <p>Visual feedback for actions</p>
                </div>
                <div class="polish-card">
                    <h3>Smooth Transitions</h3>
                    <p>Ease in/out for movements</p>
                </div>
                <div class="polish-card">
                    <h3>Audio Feedback</h3>
                    <p>Sounds for interactions</p>
                </div>
            </div>
            
            <div class="demo-box" style="margin-top: 20px;">
                <p><strong>Remember:</strong> Game feel is the difference between "it works" and "it feels great"!</p>
            </div>
        </div>

        <!-- Slide 11: Screen Shake Implementation -->
        <div class="slide">
            <h1>Screen Shake Example</h1>
            
            <div class="code-example">
<span class="comment">// Simple screen shake effect</span>
<span class="keyword">var</span> shake = {
    intensity: 0,
    duration: 0
};

<span class="keyword">function</span> <span class="function">startShake</span>(intensity, duration) {
    shake.intensity = intensity;
    shake.duration = duration;
}

<span class="keyword">function</span> <span class="function">updateShake</span>(deltaTime) {
    <span class="keyword">if</span> (shake.duration > 0) {
        shake.duration -= deltaTime;
        <span class="keyword">return</span> {
            x: (Math.<span class="function">random</span>() - 0.5) * shake.intensity,
            y: (Math.<span class="function">random</span>() - 0.5) * shake.intensity
        };
    }
    <span class="keyword">return</span> { x: 0, y: 0 };
}

<span class="comment">// Apply in render function</span>
<span class="keyword">var</span> offset = <span class="function">updateShake</span>(deltaTime);
ctx.<span class="function">translate</span>(offset.x, offset.y);
            </div>
        </div>

        <!-- Slide 12: Particle System -->
        <div class="slide">
            <h1>Simple Particle System</h1>
            
            <div class="code-example">
<span class="comment">// Particle constructor</span>
<span class="keyword">function</span> <span class="function">Particle</span>(x, y, vx, vy) {
    <span class="keyword">this</span>.x = x;
    <span class="keyword">this</span>.y = y;
    <span class="keyword">this</span>.vx = vx;
    <span class="keyword">this</span>.vy = vy;
    <span class="keyword">this</span>.life = 1.0; <span class="comment">// 1 = full life, 0 = dead</span>
}

Particle.prototype.<span class="function">update</span> = <span class="keyword">function</span>(deltaTime) {
    <span class="keyword">this</span>.x += <span class="keyword">this</span>.vx * deltaTime;
    <span class="keyword">this</span>.y += <span class="keyword">this</span>.vy * deltaTime;
    <span class="keyword">this</span>.life -= deltaTime; <span class="comment">// Fade out</span>
};

<span class="comment">// Spawn particles on collision</span>
<span class="keyword">function</span> <span class="function">spawnParticles</span>(x, y, count) {
    <span class="keyword">for</span> (<span class="keyword">var</span> i = 0; i < count; i++) {
        <span class="keyword">var</span> angle = Math.<span class="function">random</span>() * Math.PI * 2;
        <span class="keyword">var</span> speed = Math.<span class="function">random</span>() * 100;
        particles.<span class="function">push</span>(<span class="keyword">new</span> Particle(
            x, y,
            Math.<span class="function">cos</span>(angle) * speed,
            Math.<span class="function">sin</span>(angle) * speed
        ));
    }
}
            </div>
        </div>

        <!-- Slide 13: Smooth Transitions -->
        <div class="slide">
            <h1>Easing Functions</h1>
            <p>Make movement feel more natural</p>
            
            <div class="code-example">
<span class="comment">// Easing functions for smooth motion</span>

<span class="comment">// Linear (no easing)</span>
<span class="keyword">function</span> <span class="function">easeLinear</span>(t) {
    <span class="keyword">return</span> t;
}

<span class="comment">// Ease out (fast start, slow end)</span>
<span class="keyword">function</span> <span class="function">easeOutQuad</span>(t) {
    <span class="keyword">return</span> t * (2 - t);
}

<span class="comment">// Ease in-out (smooth start and end)</span>
<span class="keyword">function</span> <span class="function">easeInOutQuad</span>(t) {
    <span class="keyword">return</span> t < 0.5 
        ? 2 * t * t 
        : -1 + (4 - 2 * t) * t;
}

<span class="comment">// Usage: lerp with easing</span>
<span class="keyword">function</span> <span class="function">lerp</span>(start, end, progress) {
    <span class="keyword">var</span> eased = <span class="function">easeOutQuad</span>(progress);
    <span class="keyword">return</span> start + (end - start) * eased;
}
            </div>
        </div>

        <!-- Slide 14: Activity 1 -->
        <div class="slide">
            <h1>Activity 1: Feature Addition <span class="emoji">üé®</span></h1>
            <div class="activity-box">
                <h2>20 minutes</h2>
                <p><strong>Mission:</strong> Add ONE unique feature to your game!</p>
                
                <div class="demo-box" style="text-align: left;">
                    <h3>Choose from:</h3>
                    <ul>
                        <li><strong>Particle Effects:</strong> Explosions, trails, or sparkles</li>
                        <li><strong>Sound Effects:</strong> Add Web Audio API sounds (jump, collision, etc.)</li>
                        <li><strong>Power-ups:</strong> Collectibles that change player abilities</li>
                        <li><strong>Enemies:</strong> NPCs that move and interact with player</li>
                        <li><strong>UI Elements:</strong> Score display, health bar, timer</li>
                    </ul>
                </div>
                
                <div class="tip-box">
                    <strong>Tip:</strong> Start simple! A basic version that works is better than a complex version that doesn't.
                </div>
            </div>
        </div>

        <!-- Slide 15: Activity 2 -->
        <div class="slide">
            <h1>Activity 2: Performance Challenge <span class="emoji">‚ö°</span></h1>
            <div class="activity-box">
                <h2>15 minutes</h2>
                <p><strong>Goal:</strong> Optimize your game to handle 100+ entities smoothly!</p>
                
                <div class="demo-box" style="text-align: left;">
                    <h3>Steps:</h3>
                    <ol>
                        <li>Add FPS counter to your game</li>
                        <li>Create a spawn button that adds 10 entities</li>
                        <li>Keep spawning until FPS drops below 30</li>
                        <li>Apply optimizations:
                            <ul>
                                <li>Cache array lengths in loops</li>
                                <li>Remove dead entities from arrays</li>
                                <li>Use object pooling for particles</li>
                                <li>Batch similar render calls</li>
                            </ul>
                        </li>
                        <li>Measure the improvement!</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Slide 16: Activity 3 -->
        <div class="slide">
            <h1>Activity 3: Polish Pass <span class="emoji">‚ú®</span></h1>
            <div class="activity-box">
                <h2>20 minutes</h2>
                <p><strong>Mission:</strong> Add THREE "game feel" improvements!</p>
                
                <div class="demo-box" style="text-align: left;">
                    <h3>Polish Options:</h3>
                    <ul>
                        <li><strong>Screen Shake:</strong> On collisions or impacts</li>
                        <li><strong>Particle Burst:</strong> When collecting items</li>
                        <li><strong>Smooth Camera:</strong> Ease camera to follow player</li>
                        <li><strong>Color Flash:</strong> Player flashes on hit</li>
                        <li><strong>Fade Transitions:</strong> Between game states</li>
                        <li><strong>Trail Effect:</strong> Motion blur behind moving objects</li>
                        <li><strong>Bounce Animation:</strong> Objects bounce slightly on landing</li>
                    </ul>
                </div>
                
                <div class="tip-box">
                    <strong>Remember:</strong> Subtle effects often work better than dramatic ones!
                </div>
            </div>
        </div>

        <!-- Slide 17: Common Issues & Solutions -->
        <div class="slide">
            <h1>Troubleshooting Guide <span class="emoji">üîß</span></h1>
            
            <div class="demo-box" style="text-align: left;">
                <h3>Common Issues:</h3>
                <ul style="line-height: 1.8;">
                    <li><strong>Entities not updating:</strong> Check if they're added to update loop</li>
                    <li><strong>Collision not working:</strong> Verify collision detection order</li>
                    <li><strong>Slow performance:</strong> Profile and optimize hot paths</li>
                    <li><strong>Visual glitches:</strong> Ensure proper canvas clearing</li>
                    <li><strong>Input lag:</strong> Check event listener efficiency</li>
                </ul>
            </div>
            
            <div class="tip-box">
                <strong>Debug Process:</strong> Isolate ‚Üí Test ‚Üí Fix ‚Üí Verify
            </div>
        </div>

        <!-- Slide 18: Planning Next Steps -->
        <div class="slide">
            <h1>What's Next? <span class="emoji">üöÄ</span></h1>
            <h2>Level Up Your Game Dev Skills</h2>
            
            <div class="demo-box">
                <h3>Advanced Topics to Explore:</h3>
                <ul style="text-align: left; font-size: 1.1em;">
                    <li><strong>State Management:</strong> Menu, gameplay, game over states</li>
                    <li><strong>Level Loading:</strong> Dynamic level generation or loading</li>
                    <li><strong>Save System:</strong> LocalStorage for progress</li>
                    <li><strong>Advanced Physics:</strong> Gravity, friction, acceleration</li>
                    <li><strong>AI Behaviors:</strong> Enemy pathfinding and tactics</li>
                    <li><strong>Sprite Animation:</strong> Frame-based character animation</li>
                    <li><strong>Mobile Support:</strong> Touch controls and responsive design</li>
                </ul>
            </div>
        </div>

        <!-- Slide 19: Resources -->
        <div class="slide">
            <h1>Learning Resources <span class="emoji">üìö</span></h1>
            
            <div class="demo-box">
                <h3>Continue Your Journey:</h3>
                <ul style="text-align: left;">
                    <li><a href="https://bengsfort.github.io/articles/making-a-js-game-part-1-game-engine/" class="resource-link">Bengston JS Game Engine Series</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Games" class="resource-link">MDN Game Development Docs</a></li>
                    <li><a href="https://www.html5gamedevs.com/" class="resource-link">HTML5 Game Devs Forum</a></li>
                    <li><a href="https://github.com/collections/javascript-game-engines" class="resource-link">JavaScript Game Engines on GitHub</a></li>
                </ul>
            </div>
            
            <div class="tip-box">
                <strong>Pro Tip:</strong> The best way to learn is to build! Start small, iterate often.
            </div>
        </div>

        <!-- Slide 20: Course Wrap-up -->
        <div class="slide">
            <h1>Achievement Unlocked! <span class="emoji">üèÜ</span></h1>
            <h2>You've built a game engine from scratch in JavaScript!</h2>
            
            <div class="demo-box">
                <h3>Skills Mastered:</h3>
                <ul>
                    <li>‚úÖ Canvas rendering and high-DPI support</li>
                    <li>‚úÖ Game loop architecture with FPS management</li>
                    <li>‚úÖ Input handling and player control</li>
                    <li>‚úÖ Entity systems and game objects</li>
                    <li>‚úÖ Physics and collision detection</li>
                    <li>‚úÖ Debugging and optimization techniques</li>
                    <li>‚úÖ Polish and game feel enhancement</li>
                    <li>‚úÖ System integration and code organization</li>
                </ul>
            </div>
            
            <div class="tip-box" style="margin-top: 30px;">
                <strong>Remember:</strong> Every great game started with a single pixel on a canvas. Keep creating! üéÆ
            </div>
        </div>

        <!-- Navigation Controls -->
        <div class="navigation">
            <button id="prevBtn">Previous</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> / <span id="totalSlides">20</span>
            </span>
            <button id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Shared Presentation JavaScript -->
    <script src="../../js/presentation.js"></script>

    <!-- Lecture-Specific JavaScript -->
    <script>
        // Activity timer helper
        var activityTimers = {
            1: 20 * 60, // 20 minutes
            2: 15 * 60, // 15 minutes
            3: 20 * 60  // 20 minutes
        };

        document.addEventListener('slidechange', function(e) {
            var slideNum = e.detail.currentSlide + 1;
            
            // Start timer for activity slides
            if (slideNum === 14 || slideNum === 15 || slideNum === 16) {
                var activityNum = slideNum - 13;
                console.log('Activity ' + activityNum + ' started! (' + (activityTimers[activityNum] / 60) + ' minutes)');
            }
            
            // Easter egg on final slide
            if (slideNum === 20) {
                console.log('%cüéÆ Congratulations! You\'re now a game developer! üéÆ', 'font-size: 20px; color: #00ff00; font-weight: bold;');
                console.log('%cNow go make something amazing!', 'font-size: 16px; color: #00aaff;');
            }
        });
        
        // Debug mode toggle (press 'D' key)
        var debugMode = false;
        document.addEventListener('keydown', function(e) {
            if (e.key === 'd' || e.key === 'D') {
                debugMode = !debugMode;
                console.log('Debug mode: ' + (debugMode ? 'ON' : 'OFF'));
            }
        });
    </script>
</body>
</html>